<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tema 13.Los Cuerpos Generales (I): Funciones y derechos funcionarios</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f9f9f9;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 15px;
        }
        .pregunta {
            margin-bottom: 25px;
            padding: 15px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .pregunta p {
            font-weight: bold;
            margin-top: 0;
        }
        label {
            display: block;
            padding: 8px 0;
            cursor: pointer;
        }
        input[type="radio"] {
            margin-right: 10px;
        }
        .correcta {
            color: #27ae60;
            font-weight: bold;
        }
        .incorrecta {
            color: #e74c3c;
            text-decoration: line-through;
        }
        .respuesta-correcta {
            color: #27ae60;
            font-weight: bold;
            margin-top: 5px;
            display: none;
        }
        #resultado {
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4f8;
            border-left: 6px solid #3498db;
            border-radius: 5px;
            display: none;
        }
        #contador {
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            color: #7f8c8d;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 20px auto;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        .explicacion {
            font-style: italic;
            color: #7f8c8d;
            margin-top: 5px;
            display: none;
        }
        #indice {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }
        .numero-pregunta {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ecf0f1;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }
        .numero-pregunta:hover {
            background-color: #bdc3c7;
        }
        .numero-pregunta.respondida {
            background-color: #2ecc71;
            color: white;
        }
        .numero-pregunta.respondida-incorrecta {
            background-color: #e74c3c;
            color: white;
        }
        .controles-navegacion {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        #anterior-btn {
            background-color: #95a5a6;
        }
        #anterior-btn:hover {
            background-color: #7f8c8d;
        }
        #finalizar-btn {
            background-color: #e67e22;
            display: none;
        }
        #finalizar-btn:hover {
            background-color: #d35400;
        }
    </style>
</head>
<body>
    <h1>Tema Tema 13.Los Cuerpos Generales (I): Funciones y derechos funcionarios</h1>

    
    <form id="testForm">
        <!-- Las preguntas se insertarán aquí dinámicamente -->
    </form>
    
    <div class="controles-navegacion">
        <button type="button" id="anterior-btn" onclick="anteriorPregunta()">Anterior</button>
        <button type="button" id="siguiente-btn" onclick="siguientePregunta()">Siguiente</button>
        <button type="button" id="finalizar-btn" onclick="finalizarTest()">Ver resultados finales</button>
    </div>
        <div id="contador">Pregunta <span id="pregunta-actual">1</span> de <span id="total-preguntas">30</span></div>
    
    <div id="indice">
        <!-- Los números de pregunta se generarán aquí -->
    </div>
    <div id="resultado"></div>
    
    <script>
               // Reemplazar "[a-d]\) --> por "
        const preguntas = [
  {
    pregunta: "1. ¿Qué función específica realiza el Cuerpo de Auxilio Judicial como agente de la autoridad?",
    opciones: [
      "a) Redactar sentencias",
      "b) Proceder a la ejecución de embargos y lanzamientos",
      "c) Representar a las partes en juicio",
      "d) Asesorar jurídicamente a los jueces"
    ],
    correcta: 1,
    explicacion: "Como agente de la autoridad, el Cuerpo de Auxilio Judicial procede a la ejecución de embargos y lanzamientos."
  },
  {
    pregunta: "2. ¿Qué función del Cuerpo de Tramitación Procesal fue preguntada en exámenes de 2024?",
    opciones: [
      "a) Formación de autos y expedientes",
      "b) Funciones de naturaleza análoga encomendadas por superiores",
      "c) Registro de correspondencia",
      "d) Confección de cédulas"
    ],
    correcta: 1,
    explicacion: "En 2024 se preguntó sobre las funciones de naturaleza análoga que puedan ser encomendadas por los superiores jerárquicos."
  },
  {
    pregunta: "3. ¿Qué función puede realizar el Cuerpo de Gestión Procesal en ausencia de letrados?",
    opciones: [
      "a) Sustituir al juez en audiencias",
      "b) Actuar como fedatarios en registros simultáneos de la Audiencia Nacional",
      "c) Representar al Ministerio Fiscal",
      "d) Ejercer la abogacía"
    ],
    correcta: 1,
    explicacion: "Excepcionalmente pueden intervenir como fedatarios en entradas y registros en lugares cerrados acordados por la Audiencia Nacional."
  },
  {
    pregunta: "4. ¿Qué organismo elabora la oferta de empleo público en Justicia?",
    opciones: [
      "a) Consejo General del Poder Judicial",
      "b) Ministerio de Justicia",
      "c) Tribunal Constitucional",
      "d) Comunidades Autónomas"
    ],
    correcta: 1,
    explicacion: "El Ministerio de Justicia elaborará la oferta de empleo público integrando las necesidades de las CCAA."
  },
  {
    pregunta: "5. ¿Qué porcentaje máximo puede alcanzar el cupo de discapacitados cuando se acumulan plazas?",
    opciones: [
      "a) 7%",
      "b) 8%",
      "c) 10%",
      "d) 12%"
    ],
    correcta: 2,
    explicacion: "Las plazas no cubiertas se acumulan al cupo del 7% de la oferta siguiente, con un límite máximo del 10%."
  },
  {
    pregunta: "6. ¿Qué principio NO rige la selección de funcionarios según el EBEP?",
    opciones: [
      "a) Igualdad",
      "b) Mérito",
      "c) Capacidad",
      "d) Antigüedad"
    ],
    correcta: 3,
    explicacion: "Los principios son igualdad, mérito y capacidad, no la antigüedad."
  },
  {
    pregunta: "7. ¿Quién preside los Tribunales Calificadores Únicos?",
    opciones: [
      "a) Un magistrado-juez, fiscal o letrado",
      "b) El funcionario más antiguo",
      "c) Un representante sindical",
      "d) Un técnico del Ministerio"
    ],
    correcta: 0,
    explicacion: "Lo preside un magistrado-juez, fiscal, letrado de la Administración de Justicia, o médico forense."
  },
  {
    pregunta: "8. ¿Qué plazo máximo hay entre el fin de un ejercicio y el inicio del siguiente en selección?",
    opciones: [
      "a) 15 días naturales",
      "b) 30 días naturales",
      "c) 45 días naturales",
      "d) 60 días naturales"
    ],
    correcta: 2,
    explicacion: "El plazo máximo entre ejercicios es de 45 días naturales."
  },
  {
    pregunta: "9. ¿Qué se establece mediante sorteo anual de la Secretaría General?",
    opciones: [
      "a) Los tribunales calificadores",
      "b) El orden de actuación de aspirantes",
      "c) Las sedes de examen",
      "d) Los temas a eliminar"
    ],
    correcta: 1,
    explicacion: "El orden de actuación de los aspirantes se establece según el sorteo anual de la Secretaría General."
  },
  {
    pregunta: "10. ¿Dónde deben publicarse los anuncios de pruebas una vez iniciado el proceso?",
    opciones: [
      "a) Solo en el BOE",
      "b) En la web del Ministerio y CCAA",
      "c) En prensa nacional",
      "d) En tablones de los juzgados"
    ],
    correcta: 1,
    explicacion: "Los anuncios se publican en la web del Ministerio y CCAA con 12-24 horas de antelación."
  },
  {
    pregunta: "11. ¿Qué documento NO deben aportar los aspirantes propuestos?",
    opciones: [
      "a) Título académico",
      "b) Certificado de penales",
      "c) Certificado médico",
      "d) Justificante de pago de tasas"
    ],
    correcta: 3,
    explicacion: "El justificante de pago de tasas se presenta al solicitar, no al ser propuesto."
  },
  {
    pregunta: "12. ¿Qué ocurre si un funcionario pierde la nacionalidad española?",
    opciones: [
      "a) Nada, sigue en su puesto",
      "b) Se le abre expediente disciplinario",
      "c) Pierde la condición de funcionario",
      "d) Debe solicitar rehabilitación"
    ],
    correcta: 2,
    explicacion: "La pérdida de la nacionalidad española produce la pérdida de la condición de funcionario."
  },
  {
    pregunta: "13. ¿Hasta qué edad pueden prolongar su servicio los funcionarios?",
    opciones: [
      "a) 65 años",
      "b) 67 años",
      "c) 70 años",
      "d) Sin límite"
    ],
    correcta: 2,
    explicacion: "Pueden prolongar voluntariamente su servicio hasta los 70 años."
  },
  {
    pregunta: "14. ¿Qué derecho tienen los funcionarios respecto a su puesto de trabajo?",
    opciones: [
      "a) A no ser removidos del puesto",
      "b) A elegir su destino anualmente",
      "c) A rechazar órdenes jerárquicas",
      "d) A modificar sus funciones"
    ],
    correcta: 0,
    explicacion: "Tienen derecho al mantenimiento de su puesto y a no ser removidos arbitrariamente."
  },
  {
    pregunta: "15. ¿Qué deben hacer los funcionarios ante órdenes que consideren ilegales?",
    opciones: [
      "a) Obedecerlas sin cuestionar",
      "b) Dar cuenta a las autoridades competentes",
      "c) Hacerlas públicas en medios",
      "d) Ignorarlas"
    ],
    correcta: 1,
    explicacion: "Deben dar cuenta a las autoridades competentes de órdenes contrarias a la legalidad."
  },
  {
    pregunta: "16. ¿Qué actividad es incompatible para médicos forenses?",
    opciones: [
      "a) Docencia universitaria",
      "b) Medicina de empresa",
      "c) Investigación científica",
      "d) Publicación de artículos"
    ],
    correcta: 1,
    explicacion: "Les está prohibido ejercer como médicos de empresa o de entidades aseguradoras."
  },
  {
    pregunta: "17. ¿Qué Ley regula las incompatibilidades del personal público?",
    opciones: [
      "a) Ley 30/1984",
      "b) Ley 53/1984",
      "c) Ley 7/2007",
      "d) Ley 40/2015"
    ],
    correcta: 1,
    explicacion: "La Ley 53/1984 regula las incompatibilidades del personal al servicio de las Administraciones Públicas."
  },
  {
    pregunta: "18. ¿Qué porcentaje de participación en empresas privadas está prohibido?",
    opciones: [
      "a) Más del 5%",
      "b) Más del 10%",
      "c) Más del 15%",
      "d) Más del 20%"
    ],
    correcta: 1,
    explicacion: "No pueden tener más del 10% de participación en empresas vinculadas al sector público."
  },
  {
    pregunta: "19. ¿Cuántas horas semanales trabajan los funcionarios con dedicación especial?",
    opciones: [
      "a) 35 horas",
      "b) 37.5 horas",
      "c) 40 horas",
      "d) 42 horas"
    ],
    correcta: 2,
    explicacion: "Los funcionarios con dedicación especial tienen jornada máxima de 40 horas semanales."
  },
  {
    pregunta: "20. ¿Cuánto se compensa 1 hora trabajada en fin de semana?",
    opciones: [
      "a) 1 hora",
      "b) 1.5 horas",
      "c) 2 horas",
      "d) 2.5 horas"
    ],
    correcta: 3,
    explicacion: "Las horas en fin de semana/festivo se compensan como 2.5 horas efectivas."
  },
  {
    pregunta: "21. ¿Qué horario tiene la jornada de verano para dedicación especial?",
    opciones: [
      "a) 30 horas semanales",
      "b) 32.5 horas semanales",
      "c) 35 horas semanales",
      "d) 37.5 horas semanales"
    ],
    correcta: 2,
    explicacion: "En verano, los funcionarios con dedicación especial tienen jornada de 35 horas semanales."
  },
  {
    pregunta: "22. ¿Cuántos días de vacaciones corresponden a 30 años de servicio?",
    opciones: [
      "a) 22 días",
      "b) 24 días",
      "c) 26 días",
      "d) 28 días"
    ],
    correcta: 2,
    explicacion: "Con 30 o más años de servicio son 26 días hábiles de vacaciones."
  },
  {
    pregunta: "23. ¿Cuántos días de permiso por traslado de domicilio?",
    opciones: [
      "a) 1 día",
      "b) 2 días",
      "c) 3 días",
      "d) 5 días"
    ],
    correcta: 0,
    explicacion: "El permiso por traslado de domicilio es de 1 día."
  },
  {
    pregunta: "24. ¿Cuánto dura el permiso por guarda con fines de adopción?",
    opciones: [
      "a) 8 semanas",
      "b) 12 semanas",
      "c) 16 semanas",
      "d) 20 semanas"
    ],
    correcta: 2,
    explicacion: "El permiso por guarda con fines de adopción tiene duración de 16 semanas."
  },
  {
    pregunta: "25. ¿Qué permiso tiene el progenitor no biológico por nacimiento?",
    opciones: [
      "a) 8 semanas",
      "b) 12 semanas",
      "c) 16 semanas",
      "d) 20 semanas"
    ],
    correcta: 2,
    explicacion: "El permiso del progenitor diferente de la madre biológica es de 16 semanas."
  },
  {
    pregunta: "26. ¿Qué medidas pueden solicitar víctimas de terrorismo?",
    opciones: [
      "a) Reducción de jornada",
      "b) Cambio de identidad",
      "c) Jubilación anticipada",
      "d) Indemnización económica"
    ],
    correcta: 0,
    explicacion: "Pueden solicitar reducción de jornada o adaptación horaria."
  },
  {
    pregunta: "27. ¿Hasta qué edad se puede solicitar permiso por enfermedad grave de hijo?",
    opciones: [
      "a) 18 años",
      "b) 23 años",
      "c) 25 años",
      "d) 30 años"
    ],
    correcta: 1,
    explicacion: "El permiso puede mantenerse hasta los 23 años (hasta 26 si hay discapacidad ≥65%)."
  },
  {
    pregunta: "28. ¿Qué licencia NO está retribuida?",
    opciones: [
      "a) Por matrimonio",
      "b) Por formación",
      "c) Por asuntos propios",
      "d) Por enfermedad"
    ],
    correcta: 2,
    explicacion: "Las licencias por asuntos propios son sin derecho a retribución."
  },
  {
    pregunta: "29. ¿Cuánto dura la licencia por enfermedad antes de necesitar parte médico?",
    opciones: [
      "a) 3 días",
      "b) 4 días",
      "c) 5 días",
      "d) 7 días"
    ],
    correcta: 1,
    explicacion: "Debe solicitarse a partir del 4º día de ausencia."
  },
  {
    pregunta: "30. ¿Qué organismo coordina la política de personal entre Estado y CCAA?",
    opciones: [
      "a) Consejo de Ministros",
      "b) Comisión de Recursos Humanos",
      "c) Tribunal Constitucional",
      "d) Inspección de Trabajo"
    ],
    correcta: 1,
    explicacion: "La Comisión de Recursos Humanos depende de la Conferencia Sectorial y coordina la política de personal."
  },
  {
    pregunta: "31. ¿Qué función NO realiza el Cuerpo de Auxilio Judicial?",
    opciones: [
      "a) Velar por condiciones de salas de vistas",
      "b) Comprobar medios técnicos para procesos",
      "c) Desempeñar jefaturas en relaciones de puestos",
      "d) Representar a partes en juicio"
    ],
    correcta: 3,
    explicacion: "Representar a partes en juicio es función de abogados/procuradores, no del Auxilio Judicial."
  },
  {
    pregunta: "32. ¿Qué función del Cuerpo de Gestión fue preguntada en exámenes?",
    opciones: [
      "a) Gestionar tramitación de procedimientos",
      "b) Intervenir como fedatarios en registros",
      "c) Desempeñar Secretaría de Oficina Judicial",
      "d) Colaborar en gestión administrativa"
    ],
    correcta: 1,
    explicacion: "En 2019 se preguntó sobre su intervención como fedatarios en registros de la Audiencia Nacional."
  },
  {
    pregunta: "33. ¿Qué órgano aprueba finalmente la oferta de empleo público?",
    opciones: [
      "a) Ministerio de Justicia",
      "b) Consejo de Ministros",
      "c) Cortes Generales",
      "d) Consejo General del Poder Judicial"
    ],
    correcta: 1,
    explicacion: "La oferta es elevada al Gobierno para su aprobación tras pasar por Hacienda."
  },
  {
    pregunta: "34. ¿Qué se requiere para que una persona con discapacidad ocupe plaza reservada?",
    opciones: [
      "a) Solo acreditar discapacidad",
      "b) Superar pruebas y acreditar compatibilidad",
      "c) Tener recomendación de asociación",
      "d) Ser funcionario en otro cuerpo"
    ],
    correcta: 1,
    explicacion: "Deben superar las pruebas selectivas y acreditar discapacidad compatible con las funciones."
  },
  {
    pregunta: "35. ¿Qué norma regula los procesos selectivos en Justicia?",
    opciones: [
      "a) Solo la LOPJ",
      "b) Solo el EBEP",
      "c) LOPJ y EBEP",
      "d) Ley de Función Pública"
    ],
    correcta: 2,
    explicacion: "El acceso se rige por la LOPJ y el Estatuto Básico del Empleado Público."
  },
  {
    pregunta: "36. ¿Quién elabora los temarios de las oposiciones?",
    opciones: [
      "a) Los Tribunales Calificadores",
      "b) La Comisión de Selección",
      "c) Las CCAA",
      "d) Los sindicatos"
    ],
    correcta: 1,
    explicacion: "La Comisión de Selección elabora y aprueba los temarios."
  },
  {
    pregunta: "37. ¿Qué garantiza la autonomía funcional de los Tribunales?",
    opciones: [
      "a) Independencia en su actuación",
      "b) Libre designación de plazas",
      "c) Modificación de requisitos",
      "d) Elección de aspirantes"
    ],
    correcta: 0,
    explicacion: "Gozan de autonomía funcional para garantizar objetividad e independencia."
  },
  {
    pregunta: "38. ¿Qué debe contener la convocatoria?",
    opciones: [
      "a) Número de plazas y ámbito territorial",
      "b) Sistema selectivo y pruebas",
      "c) Temario y sistema de calificación",
      "d) Todas las anteriores"
    ],
    correcta: 3,
    explicacion: "La convocatoria debe incluir todos estos elementos según el artículo 2.5.1.2."
  },
  {
    pregunta: "39. ¿Qué ocurre si un funcionario es condenado a 4 años por delito doloso?",
    opciones: [
      "a) Suspensión temporal",
      "b) Pérdida de la condición de funcionario",
      "c) Traslado forzoso",
      "d) Multa económica"
    ],
    correcta: 1,
    explicacion: "La condena a pena privativa de libertad superior a 3 años por delito doloso produce la pérdida de la condición."
  },
  {
    pregunta: "40. ¿Qué causa permite la rehabilitación?",
    opciones: [
      "a) Pérdida de nacionalidad recuperada",
      "b) Sanción disciplinaria leve",
      "c) Cambio de domicilio",
      "d) Enfermedad temporal"
    ],
    correcta: 0,
    explicacion: "La rehabilitación procede cuando se recupera la nacionalidad perdida."
  },
  {
    pregunta: "41. ¿Qué incluye el derecho a carrera profesional?",
    opciones: [
      "a) Ascensos por antigüedad",
      "b) Promoción y progresión retributiva",
      "c) Elección de destino anual",
      "d) Reducción de jornada garantizada"
    ],
    correcta: 1,
    explicacion: "Incluye la promoción profesional y progresión retributiva basada en méritos."
  },
  {
    pregunta: "42. ¿Qué deben hacer los funcionarios al tratar con ciudadanos?",
    opciones: [
      "a) Dar a conocer su identidad y categoría",
      "b) Mantener el anonimato",
      "c) Limitar la información",
      "d) Delegar en superiores"
    ],
    correcta: 0,
    explicacion: "Deben identificarse y dar a conocer su categoría al tratar con ciudadanos."
  },
  {
    pregunta: "43. ¿Qué prohibición afecta a gestores procesales?",
    opciones: [
      "a) Ejercer la abogacía",
      "b) Docencia universitaria",
      "c) Investigación jurídica",
      "d) Publicación de artículos"
    ],
    correcta: 0,
    explicacion: "Les está prohibido ejercer la abogacía, procuraduría o asesoramiento jurídico."
  },
  {
    pregunta: "44. ¿Qué permite la Ley 53/1984 respecto a actividades públicas?",
    opciones: [
      "a) Doble empleo público sin límites",
      "b) Un segundo puesto en casos concretos con autorización",
      "c) Libre compatibilidad con cargos políticos",
      "d) Actividades públicas ilimitadas"
    ],
    correcta: 1,
    explicacion: "Permite un segundo puesto en casos concretos (no retribuidos, investigación) con autorización."
  },
  {
    pregunta: "45. ¿Qué compensación reciben las horas nocturnas trabajadas?",
    opciones: [
      "a) 1 hora por cada hora trabajada",
      "b) 1.5 horas por cada hora",
      "c) 2 horas por cada hora",
      "d) 2.5 horas por cada hora"
    ],
    correcta: 2,
    explicacion: "Las horas nocturnas (entre 22:00-7:00) se compensan como 2 horas efectivas."
  },
  {
    pregunta: "46. ¿Cuándo se aplica la jornada intensiva de verano?",
    opciones: [
      "a) 1 junio - 31 agosto",
      "b) 16 junio - 15 septiembre",
      "c) 1 julio - 31 agosto",
      "d) Julio y agosto"
    ],
    correcta: 1,
    explicacion: "La jornada de verano es del 16 de junio al 15 de septiembre."
  },
  {
    pregunta: "47. ¿Qué permiso tiene una funcionaria víctima de violencia de género?",
    opciones: [
      "a) Reducción de jornada con retribución íntegra",
      "b) Licencia retribuida por 6 meses",
      "c) Exención de horario",
      "d) Traslado automático"
    ],
    correcta: 0,
    explicacion: "Puede solicitar reducción de jornada (hasta 1/3 con retribución íntegra) o adaptación horaria."
  },
  {
    pregunta: "48. ¿Qué caracteriza el permiso parental?",
    opciones: [
      "a) Es transferible entre progenitores",
      "b) Dura hasta que el niño cumple 8 años",
      "c) Se disfruta obligatoriamente a tiempo completo",
      "d) Requiere 10 años de antigüedad"
    ],
    correcta: 1,
    explicacion: "El permiso parental es para cuidado hasta que el menor cumpla ocho años."
  },
  {
    pregunta: "49. ¿Qué licencia SÍ está retribuida?",
    opciones: [
      "a) Por asuntos propios",
      "b) Por formación no oficial",
      "c) Por matrimonio",
      "d) Por interés particular"
    ],
    correcta: 2,
    explicacion: "La licencia por matrimonio (15 días) es con plenitud de derechos económicos."
  },
  {
    pregunta: "50. ¿Quién concede los permisos y licencias?",
    opciones: [
      "a) Solo el Ministerio de Justicia",
      "b) Ministerio o CCAA según competencias",
      "c) Los sindicatos",
      "d) Los jefes inmediatos"
    ],
    correcta: 1,
    explicacion: "Los concede el Ministerio de Justicia o las CCAA con competencias asumidas."
  }
];

        let preguntaActual = 0;
        let respuestasCorrectas = 0;
        let respuestasUsuario = Array(preguntas.length).fill(null);

        // Mostrar la primera pregunta al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
        preguntas.forEach(p => {
            // Guardamos la opción correcta original
            const correctaOriginal = p.opciones[p.correcta];
            // Mezclamos las opciones
            p.opciones = mezclarArray(p.opciones);
            // Actualizamos el índice de la nueva correcta
            p.correcta = p.opciones.indexOf(correctaOriginal);
        });

            document.getElementById('total-preguntas').textContent = preguntas.length;
            generarIndice();
            mostrarPregunta(preguntaActual);
            actualizarControlesNavegacion();
        });
        
        //para mezclar
            function mezclarArray(array) {
            const copia = [...array];
            for (let i = copia.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [copia[i], copia[j]] = [copia[j], copia[i]];
            }
            return copia;
            }

        


        // Función para generar el índice de preguntas
        function generarIndice() {
            const indice = document.getElementById('indice');
            indice.innerHTML = '';
            
            preguntas.forEach((_, index) => {
                const numero = document.createElement('div');
                numero.className = 'numero-pregunta';
                numero.textContent = index + 1;
                numero.onclick = function() { irAPregunta(index); };
                indice.appendChild(numero);
            });
        }

        // Función para ir a una pregunta específica
        function irAPregunta(num) {
            preguntaActual = num;
            mostrarPregunta(preguntaActual);
            actualizarControlesNavegacion();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Función para mostrar una pregunta
        function mostrarPregunta(num) {
            const form = document.getElementById('testForm');
            form.innerHTML = '';
            
            const pregunta = preguntas[num];
            
            const divPregunta = document.createElement('div');
            divPregunta.className = 'pregunta';
            
            const pTexto = document.createElement('p');
            pTexto.textContent = pregunta.pregunta;
            divPregunta.appendChild(pTexto);
            
            // Crear opciones de respuesta
            pregunta.opciones.forEach((opcion, index) => {
                const label = document.createElement('label');
                
                const input = document.createElement('input');
                input.type = 'radio';
                input.name = 'pregunta';
                input.value = index;
                input.onclick = function() { verificarRespuesta(index); };
                
                // Verificar si ya se respondió esta pregunta
                if (respuestasUsuario[num] !== null) {
                    input.disabled = true;
                    if (index === pregunta.correcta) {
                        label.classList.add('correcta');
                    } else if (index === respuestasUsuario[num] && respuestasUsuario[num] !== pregunta.correcta) {
                        label.classList.add('incorrecta');
                    }
                }
                
                label.appendChild(input);
                label.appendChild(document.createTextNode(opcion));
                divPregunta.appendChild(label);
            });
            
            // Mostrar explicación si ya se respondió
            if (respuestasUsuario[num] !== null) {
                const divExplicacion = document.createElement('div');
                divExplicacion.className = 'explicacion';
                divExplicacion.textContent = pregunta.explicacion;
                divExplicacion.style.display = 'block';
                divPregunta.appendChild(divExplicacion);
            }
            
            form.appendChild(divPregunta);
            document.getElementById('pregunta-actual').textContent = num + 1;
            
            // Actualizar el índice
            actualizarIndice();
        }

        // Función para actualizar el índice
        function actualizarIndice() {
            const numeros = document.querySelectorAll('.numero-pregunta');
            numeros.forEach((numero, index) => {
                numero.classList.remove('respondida', 'respondida-incorrecta');
                
                if (respuestasUsuario[index] !== null) {
                    if (respuestasUsuario[index] === preguntas[index].correcta) {
                        numero.classList.add('respondida');
                    } else {
                        numero.classList.add('respondida-incorrecta');
                    }
                }
            });
        }

        // Función para verificar la respuesta seleccionada
        function verificarRespuesta(opcionSeleccionada) {
            const pregunta = preguntas[preguntaActual];
            respuestasUsuario[preguntaActual] = opcionSeleccionada;
            
            if (opcionSeleccionada === pregunta.correcta) {
                respuestasCorrectas++;
            } else if (respuestasUsuario[preguntaActual] !== null && pregunta.correcta === respuestasUsuario[preguntaActual]) {
                // Si antes estaba correcta y ahora no, restamos
                respuestasCorrectas--;
            }
            
            // Actualizar la visualización de las opciones
            mostrarPregunta(preguntaActual);
            
            // Mostrar resultado parcial
            const preguntasRespondidas = respuestasUsuario.filter(r => r !== null).length;
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.innerHTML = `
                <p>Respuestas correctas: ${respuestasCorrectas} de ${preguntasRespondidas}</p>
                <p>Porcentaje de aciertos: ${preguntasRespondidas > 0 ? ((respuestasCorrectas / preguntasRespondidas) * 100).toFixed(1) : 0}%</p>
            `;
            resultadoDiv.style.display = 'block';
            
            // Actualizar controles de navegación
            actualizarControlesNavegacion();
        }

        // Función para actualizar controles de navegación
        function actualizarControlesNavegacion() {
            document.getElementById('anterior-btn').style.display = preguntaActual === 0 ? 'none' : 'block';
            document.getElementById('siguiente-btn').style.display = preguntaActual === preguntas.length - 1 ? 'none' : 'block';
            document.getElementById('finalizar-btn').style.display = preguntaActual === preguntas.length - 1 ? 'block' : 'none';
        }

        // Función para avanzar a la siguiente pregunta
        function siguientePregunta() {
            if (preguntaActual < preguntas.length - 1) {
                preguntaActual++;
                mostrarPregunta(preguntaActual);
                actualizarControlesNavegacion();
            }
        }

        // Función para retroceder a la pregunta anterior
        function anteriorPregunta() {
            if (preguntaActual > 0) {
                preguntaActual--;
                mostrarPregunta(preguntaActual);
                actualizarControlesNavegacion();
            }
        }

        // Función para finalizar el test
        function finalizarTest() {
            const preguntasRespondidas = respuestasUsuario.filter(r => r !== null).length;
            const resultadoFinal = `
                <h3>Test completado</h3>
                <p>Has respondido ${preguntasRespondidas} de ${preguntas.length} preguntas.</p>
                <p>Respuestas correctas: ${respuestasCorrectas} (${preguntasRespondidas > 0 ? ((respuestasCorrectas / preguntasRespondidas) * 100).toFixed(1) : 0}%)</p>
                <p>Respuestas incorrectas: ${preguntasRespondidas - respuestasCorrectas}</p>
                <p>Preguntas sin responder: ${preguntas.length - preguntasRespondidas}</p>
            `;
            document.getElementById('resultado').innerHTML = resultadoFinal;
            document.getElementById('reintentar-incorrectas-btn').style.display = 'block';
        }
        
        function reintentarIncorrectas() {
    const preguntasIncorrectas = preguntas
        .map((pregunta, index) => ({ ...pregunta, indexOriginal: index }))
        .filter((_, index) => respuestasUsuario[index] !== null && respuestasUsuario[index] !== preguntas[index].correcta);

    if (preguntasIncorrectas.length === 0) {
        alert('No has fallado ninguna pregunta.');
        return;
    }

    preguntasIncorrectas.forEach(p => {
        // Desordenar las opciones
        const opcionesOriginales = [...p.opciones];
        const correctaOriginal = p.opciones[p.correcta];

        // Mezclar opciones
        for (let i = opcionesOriginales.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [opcionesOriginales[i], opcionesOriginales[j]] = [opcionesOriginales[j], opcionesOriginales[i]];
        }

        p.opciones = opcionesOriginales;
        p.correcta = opcionesOriginales.indexOf(correctaOriginal);
    });

    // Reiniciar variables con solo las incorrectas
    preguntaActual = 0;
    respuestasCorrectas = 0;
    respuestasUsuario = Array(preguntasIncorrectas.length).fill(null);
    preguntas.splice(0, preguntas.length, ...preguntasIncorrectas); // reemplaza el array de preguntas

    // Actualizar interfaz
    document.getElementById('reintentar-incorrectas-btn').style.display = 'none';
    document.getElementById('resultado').style.display = 'none';
    document.getElementById('finalizar-btn').style.display = 'none';

    generarIndice();
    mostrarPregunta(preguntaActual);
    actualizarControlesNavegacion();
}
    </script>
    <button type="button" id="reintentar-incorrectas-btn" style="display:none;" onclick="reintentarIncorrectas()">Reintentar preguntas falladas</button>
</body>
</html>